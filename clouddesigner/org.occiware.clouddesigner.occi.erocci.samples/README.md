# org.occiware.clouddesigner.occi.erocci.samples

This project shows how to deploy both OCCI extensions and configurations generated by OCCIWare Cloud Designer on [erocci](http://erocci.ow2.org).

Following uses the [erocci Docker-based container](https://github.com/erocci/docker-erocci).

## Requirements

- Install [Docker Toolbox](https://www.docker.com/docker-toolbox).

or

- Install [Docker 1.8 and Docker Machine](https://www.docker.com/).

and

- Use Linux or MacOS as only Unix commands are provided.

## Module content

- `config/erocci/` contains an erocci configuration including several OCCI extensions such as OCCI Infrastructure and OCCIware Docker (more will come later).

- `config/occi/` contains OCCI configurations of Infrastructure and Docker extensions.

- `images/` contains OCCI diagrams.

- `scripts/` contains Unix-based scripts.

- `README.md` is this file.

## Script-based manual erocci demonstration

* Start a shell and go to this folder:

	$ cd <FOLDER-WHERE-THIS-MODULE-IS>/org.occiware.clouddesigner.occi.erocci.samples

* Create a Docker machine named OCCIware:

	$ docker-machine create --driver virtualbox OCCIware

* Set the Docker environment variables to use the OCCIware machine:

	$ eval "$(docker-machine env OCCIware)"

* Run erocci Docker-based container on the OCCIware machine:

	$ docker run --name erocci -p 8080:80 -v `pwd`/config/erocci:/tmp:rw -d erocci/erocci

	- '-p 8080:80' exports the port 80 of the erocci container to the port 8080 of the OCCIware machine.
	- '-v `pwd`/config/erocci:/tmp:rw' replaces the default erocci configuration by the configuration stored in the config/erocci/ folder.

* Display the URL of the running erocci:

	EROCCI_URL=http://`docker-machine ip OCCIware`:8080
	echo erocci is running at $EROCCI_URL

* Display all OCCI categories managed by the running erocci:

	$ curl $EROCCI_URL/-/

* Display all OCCI entities managed by the running erocci:

	scripts/erocci-show-all-entities.sh $EROCCI_URL

* Create several OCCI resources:

	$ scripts/infrastructure.occic.sh $EROCCI_URL

* Display all previously created OCCI entities:

	$ scripts/erocci-show-all-entities.sh $EROCCI_URL

* Clean up the environment:

	$ docker-machine rm -f OCCIware

This demonstration can be also run with

	$ scripts/manual_erocci_demonstration.sh

## Files automatically generated by OCCIware Cloud Designer

The following files have been automatically generated with OCCIware Cloud Designer:
* `config/erocci/infrastructure.xml`
* `config/erocci/docker.xml`
* `scripts/infrastructure.occic.sh`
